zabbix_export:
  version: '5.4'
  date: '2021-05-09T00:00:00Z'
  groups:
    -
      uuid: 3dcd5bbe90534f9e8eb5c2d53756af63
      name: Templates/Power
  templates:
    -
      uuid: 32d3c78ff44c4c3c9ff5b893ad7f5fc9
      template: 'APC Smart-UPS RT 1000 XL SNMP'
      name: 'APC Smart-UPS RT 1000 XL SNMP'
      description: |
        Template Power APC Smart-UPS RT 1000 XL
        
        MIBs used:
        PowerNet-MIB
        SNMPv2-MIB
        
        You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/420730-discussion-thread-for-official-zabbix-template-apc-ups
        
        Template tooling version used: 0.38
      groups:
        -
          name: Templates/Power
      items:
        -
          uuid: 6ac68411ef214cc7aa49d39d58ce3c6a
          name: 'Battery capacity'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.318.1.1.1.2.3.1.0
          key: 'battery.capacity[upsHighPrecBatteryCapacity]'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: |
            MIB: PowerNet-MIB
            The remaining battery capacity expressed as
             percentage of full capacity.
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.1'
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: Status
          triggers:
            -
              uuid: c8d96d216f4d43dea343777322a962e0
              expression: '{last()} < {$BATTERY.CAPACITY.MIN.WARN}'
              name: 'Battery has low capacity (below {$BATTERY.CAPACITY.MIN.WARN}%)'
              opdata: 'Current capacity: {ITEM.LASTVALUE1}'
              priority: HIGH
        -
          uuid: 7f3b05afa58142d5b8670c40c196baf8
          name: 'External battery packs count'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.318.1.1.1.2.2.5.0
          key: 'battery.external_packs_count[upsAdvBatteryNumOfBattPacks]'
          delay: 1h
          history: 7d
          description: |
            MIB: PowerNet-MIB
            The number of external battery packs connected to the UPS. If
             the UPS does not use smart cells then the agent reports
             ERROR_NO_SUCH_NAME.
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: Status
        -
          uuid: 87b91005f5ff4ba5b0086e25eaa799bd
          name: 'Battery last replace date'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.318.1.1.1.2.1.3.0
          key: 'battery.last_replace_date[upsBasicBatteryLastReplaceDate]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          description: |
            MIB: PowerNet-MIB
            The date when the UPS system's batteries were last replaced
             in mm/dd/yy (or yyyy) format. For Smart-UPS models, this value
             is originally set at the factory. When the UPS batteries
             are replaced, this value should be reset by the administrator.
             For Symmetra PX 250/500 this OID is read-only and is configurable in the local display only.
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: Status
        -
          uuid: 44a33eba233e4bd7ac51ca2dcabf2939
          name: 'Battery replace indicator'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.318.1.1.1.2.2.4.0
          key: 'battery.replace_indicator[upsAdvBatteryReplaceIndicator]'
          history: 7d
          description: |
            MIB: PowerNet-MIB
            Indicates whether the UPS batteries need replacement.
          valuemap:
            name: 'PowerNet-MIB::upsAdvBatteryReplaceIndicator'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: Status
          triggers:
            -
              uuid: fbe310b19a0343b5a4a4511aa9c28a66
              expression: '{last()}=2'
              name: 'Battery needs replacement'
              priority: HIGH
              description: 'A battery installed has an internal error condition.'
        -
          uuid: 95749270e6234d6cbd1edb0c5e1118e0
          name: 'Battery runtime remaining'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.318.1.1.1.2.2.3.0
          key: 'battery.runtime_remaining[upsAdvBatteryRunTimeRemaining]'
          history: 7d
          value_type: FLOAT
          units: s
          description: |
            MIB: PowerNet-MIB
            The UPS battery run time remaining before battery
             exhaustion.
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.01'
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: Status
        -
          uuid: 047a5a3a957949d288588eb11f36f25e
          name: 'Battery status'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.318.1.1.1.2.1.1.0
          key: 'battery.status[upsBasicBatteryStatus]'
          history: 7d
          description: |
            MIB: PowerNet-MIB
            The status of the UPS batteries. A batteryLow(3) value
             indicates the UPS will be unable to sustain the current
             load, and its services will be lost if power is not restored.
             The amount of run time in reserve at the time of low battery
             can be configured by the upsAdvConfigLowBatteryRunTime.
             A batteryInFaultCondition(4)value indicates that a battery
             installed has an internal error condition.
          valuemap:
            name: 'PowerNet-MIB::upsBasicBatteryStatus'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: Status
          triggers:
            -
              uuid: 2b0be928450f4225835b6a0311534ef9
              expression: '{last()}=4'
              name: 'Battery has an internal error condition'
              priority: AVERAGE
              description: 'A battery installed has an internal error condition.'
            -
              uuid: 7c1a180878474327b74bb41d6c483ed3
              expression: '{last()}=3'
              name: 'Battery is Low'
              priority: AVERAGE
              description: 'The UPS will be unable to sustain the current load, and its services will be lost if power is not restored.'
        -
          uuid: 04cd5e06823846b58ad57e2c358f346e
          name: 'Battery temperature'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.318.1.1.1.2.3.2.0
          key: 'battery.temperature[upsHighPrecBatteryTemperature]'
          history: 7d
          value_type: FLOAT
          units: ℃
          description: |
            MIB: PowerNet-MIB
            The current internal UPS temperature in Celsius.
             Temperatures below zero read as 0.
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.1'
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: Status
          triggers:
            -
              uuid: c57320aa8a554f13b6eec4d882dcd38b
              expression: '{min({$TIME.PERIOD})} > {$BATTERY.TEMP.MAX.WARN}'
              name: 'Battery has high temperature (over {$BATTERY.TEMP.MAX.WARN}℃ for {$TIME.PERIOD})'
              opdata: 'Current temperature: {ITEM.LASTVALUE1}'
              priority: HIGH
        -
          uuid: 8ee98deaf4bf46afb06f694d19757237
          name: 'Battery voltage'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.318.1.1.1.2.3.4.0
          key: 'battery.voltage[upsHighPrecBatteryActualVoltage]'
          history: 7d
          value_type: FLOAT
          units: V
          description: |
            MIB: PowerNet-MIB
            The actual battery bus voltage in Volts.
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.1'
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: Status
        -
          uuid: 4cb80c94f3d14674bc7a3933c7571eac
          name: 'Input fail cause'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.318.1.1.1.3.2.5.0
          key: 'input.fail[upsAdvInputLineFailCause]'
          history: 7d
          description: |
            MIB: PowerNet-MIB
            The reason for the occurrence of the last transfer to UPS
            battery power.  The variable is set to:
            - noTransfer(1) -- if there is no transfer yet.
            - highLineVoltage(2) -- if the transfer to battery is caused
            by an over voltage greater than the high transfer voltage.
            - brownout(3) -- if the duration of the outage is greater than
            five seconds and the line voltage is between 40% of the
            rated output voltage and the low transfer voltage.
            - blackout(4) -- if the duration of the outage is greater than five
            seconds and the line voltage is between 40% of the rated
            output voltage and ground.
            - smallMomentarySag(5) -- if the duration of the outage is less
            than five seconds and the line voltage is between 40% of the
            rated output voltage and the low transfer voltage.
            - deepMomentarySag(6) -- if the duration of the outage is less
            than five seconds and the line voltage is between 40% of the
            rated output voltage and ground.  The variable is set to
            - smallMomentarySpike(7) -- if the line failure is caused by a
            rate of change of input voltage less than ten volts per cycle.
            - largeMomentarySpike(8) -- if the line failure is caused by
            a rate of change of input voltage greater than ten volts per cycle.
            - selfTest(9) -- if the UPS was commanded to do a self test.
            - rateOfVoltageChange(10) -- if the failure is due to the rate of change of
            the line voltage.
          valuemap:
            name: 'PowerNet-MIB::upsAdvInputLineFailCause'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: Status
        -
          uuid: 700a78a4ab3c441496ecafc5ddde6a9d
          name: 'Input frequency'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.318.1.1.1.3.3.4.0
          key: 'input.frequency[upsHighPrecInputFrequency]'
          history: 7d
          value_type: FLOAT
          units: Hz
          description: |
            MIB: PowerNet-MIB
            The current input frequency to the UPS system in Hz.
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.1'
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: Status
          triggers:
            -
              uuid: 4344b8998372420788697e5be2d58859
              expression: '{min({$TIME.PERIOD})} > 0 and ({min({$TIME.PERIOD})} > {$UPS.INPUT_FREQ.MAX.WARN} or {max({$TIME.PERIOD})} < {$UPS.INPUT_FREQ.MIN.WARN})'
              name: 'Unacceptable input frequency (out of range {$UPS.INPUT_FREQ.MIN.WARN}-{$UPS.INPUT_FREQ.MAX.WARN}Hz for {$TIME.PERIOD})'
              opdata: 'Current frequency: {ITEM.LASTVALUE1}'
              priority: HIGH
        -
          uuid: e2b5b824c4704293ad68185971e9fb03
          name: 'Input voltage'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.318.1.1.1.3.3.1.0
          key: 'input.voltage[upsHighPrecInputLineVoltage]'
          history: 7d
          value_type: FLOAT
          units: V
          description: |
            MIB: PowerNet-MIB
            The current utility line voltage in VAC.
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.1'
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: Status
          triggers:
            -
              uuid: 481f73af8ee742149b40cd4a090c039a
              expression: '{min({$TIME.PERIOD})} > 0 and ({min({$TIME.PERIOD})} > {$UPS.INPUT_VOLT.MAX.WARN} or {max({$TIME.PERIOD})} < {$UPS.INPUT_VOLT.MIN.WARN})'
              name: 'Unacceptable input voltage (out of range {$UPS.INPUT_VOLT.MIN.WARN}-{$UPS.INPUT_VOLT.MAX.WARN}V for {$TIME.PERIOD})'
              opdata: 'Current voltage: {ITEM.LASTVALUE1}'
              priority: HIGH
        -
          uuid: 861757e4bb1a4dc6ac1c8ef94d973328
          name: 'Output current'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.318.1.1.1.4.3.4.0
          key: 'output.current[upsHighPrecOutputCurrent]'
          history: 7d
          value_type: FLOAT
          units: A
          description: |
            MIB: PowerNet-MIB
            The current in amperes drawn by the load on the UPS.
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.1'
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: Status
        -
          uuid: 1d9d7ef724ff41eda4fd536df6af93cb
          name: 'Output load'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.318.1.1.1.4.3.3.0
          key: 'output.load[upsHighPrecOutputLoad]'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: |
            MIB: PowerNet-MIB
            The current UPS load expressed as percentage
            of rated capacity.
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.1'
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: Status
          triggers:
            -
              uuid: d488803bbebc44be91e9f47d193f36b8
              expression: '{min({$TIME.PERIOD})} > {$UPS.OUTPUT.MAX.WARN}'
              name: 'Output load is high (over {$UPS.OUTPUT.MAX.WARN}% for {$TIME.PERIOD})'
              opdata: 'Current load: {ITEM.LASTVALUE1}'
              priority: HIGH
              description: 'A battery installed has an internal error condition.'
        -
          uuid: 3edf5e7776ae4cc6aebcedcbf4ab8d78
          name: 'Output status'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.318.1.1.1.4.1.1.0
          key: 'output.status[upsBasicOutputStatus]'
          history: 7d
          description: |
            MIB: PowerNet-MIB
            The current state of the UPS. If the UPS is unable to
             determine the state of the UPS this variable is set
             to unknown(1).
            During self-test most UPSes report onBattery(3) but
             some that support it will report onBatteryTest(15).
             To determine self-test status across all UPSes, refer
             to the upsBasicStateOutputState OID.
          valuemap:
            name: 'PowerNet-MIB::upsBasicOutputStatus'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: Status
          triggers:
            -
              uuid: fd5888e0762f45a0a2e6b1e6746b739d
              expression: '{last()}=16'
              name: 'UPS is Emergency Static Bypass'
              priority: AVERAGE
            -
              uuid: 030fb29dd55448de863d3df3e719e40e
              expression: '{last()}=10'
              name: 'UPS is Hardware Failure Bypass'
              priority: AVERAGE
            -
              uuid: bf7feb9c6cb24f3db051bc74eb9d7a2c
              expression: '{last()}=7'
              name: 'UPS is Off'
              priority: AVERAGE
            -
              uuid: 3b48aa4fe6724ebca2c263460b820fa9
              expression: '{last()}=3'
              name: 'UPS is on battery'
              priority: AVERAGE
            -
              uuid: ab2d47d833794df7b35cde81d890b605
              expression: '{last()}=4'
              name: 'UPS is on Smart Boost'
              priority: AVERAGE
            -
              uuid: 504ab69399594a83af048d835ab0d405
              expression: '{last()}=12'
              name: 'UPS is On Smart Trim'
              priority: AVERAGE
            -
              uuid: 511b59ef46a7457292f7ffee5b0801f3
              expression: '{last()}=8'
              name: 'UPS is Rebooting'
              priority: AVERAGE
            -
              uuid: 702425222104447db03b5c598768c7d6
              expression: '{last()}=11'
              name: 'UPS is Sleeping Until Power Return'
              priority: AVERAGE
            -
              uuid: 15105081cf9040baaf032bc0e079d30d
              expression: '{last()}=6'
              name: 'UPS is Software Bypass'
              priority: AVERAGE
            -
              uuid: 6b8b0a2cdbeb4e8db8c09ff8a69fa15b
              expression: '{last()}=9'
              name: 'UPS is Switched Bypass'
              priority: AVERAGE
            -
              uuid: 49f27a60946644caa06d0b014e4deb6e
              expression: '{last()}=5'
              name: 'UPS is Timed Sleeping'
              priority: AVERAGE
        -
          uuid: bcb28618699448ea8d9d056bad203a0e
          name: 'Output voltage'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.318.1.1.1.4.3.1.0
          key: 'output.voltage[upsHighPrecOutputVoltage]'
          history: 7d
          value_type: FLOAT
          units: V
          description: |
            MIB: PowerNet-MIB
            The output voltage of the UPS system in VAC.
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.1'
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: Status
        -
          uuid: d633cd3273e74209a1b0c6b761028e0a
          name: 'SNMP traps (fallback)'
          type: SNMP_TRAP
          key: snmptrap.fallback
          history: 2w
          trends: '0'
          value_type: LOG
          description: 'Item is used to collect all SNMP traps unmatched by other snmptrap items'
          logtimefmt: 'hh:mm:sszyyyy/MM/dd'
          tags:
            -
              tag: General
        -
          uuid: 50cc8e7cea0c40948c006623dfa94dae
          name: 'System contact details'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.4.0
          key: 'system.contact[sysContact.0]'
          delay: 1h
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The textual identification of the contact person for this managed
            node, together with information on how to contact this person.  If no contact
            information is known, the value is the zero-length string.
          inventory_link: CONTACT
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            -
              tag: General
        -
          uuid: e0d638ab398f40e8a9555925cd8ba907
          name: 'System description'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.1.0
          key: 'system.descr[sysDescr.0]'
          delay: 1h
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            A textual description of the entity. This value should
            include the full name and version identification of the system's hardware type, software operating-system, and
            networking software.
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            -
              tag: General
        -
          uuid: 031b9d385cae4641b9ecfb76c4174262
          name: 'System location'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.6.0
          key: 'system.location[sysLocation.0]'
          delay: 15m
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The physical location of this node (e.g., `telephone closet,
            3rd floor').  If the location is unknown, the value is the zero-length string.
          inventory_link: LOCATION
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: General
        -
          uuid: 320221ba30744ca78b8dce03dccd549b
          name: Model
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.318.1.1.1.1.1.1.0
          key: 'system.model[upsBasicIdentModel]'
          delay: 15m
          history: 7d
          trends: '0'
          value_type: CHAR
          description: |
            MIB: PowerNet-MIB
            The UPS model name (e.g. 'APC Smart-UPS 600').
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: General
        -
          uuid: e4d9441075954c068b6fd92bbff49cef
          name: 'System name'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.5.0
          key: 'system.name[sysName.0]'
          delay: 15m
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            An administratively-assigned name for this managed node.By
            convention, this is the node's fully-qualified domain name.  If the name is unknown,
            the value is the zero-length string.
          inventory_link: NAME
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: General
          triggers:
            -
              uuid: e810ed46b87b433c9f64a2f81252e5c5
              expression: '{diff()}=1 and {strlen()}>0'
              name: 'System name has changed (new name: {ITEM.VALUE})'
              priority: INFO
              description: 'System name has changed. Ack to close.'
              manual_close: 'YES'
        -
          uuid: 4e7a9b6aa8dd4371b83bf47f8246cebf
          name: 'System object ID'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.2.0
          key: 'system.objectid[sysObjectID.0]'
          delay: 15m
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The vendor's authoritative identification of the network management
            subsystem contained in the entity.  This value is allocated within the SMI enterprises
            subtree (1.3.6.1.4.1) and provides an easy and unambiguous means for determining`what
            kind of box' is being managed.  For example, if vendor`Flintstones, Inc.' was
            assigned the subtree1.3.6.1.4.1.4242, it could assign the identifier 1.3.6.1.4.1.4242.1.1
            to its `Fred Router'.
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: General
        -
          uuid: 9ebb979a5e4a45fd9acf956df034f9be
          name: 'Serial number'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.318.1.1.1.1.2.3.0
          key: 'system.sn[upsAdvIdentSerialNumber]'
          delay: 15m
          history: 7d
          trends: '0'
          value_type: CHAR
          description: |
            MIB: PowerNet-MIB
            An 8-character string identifying the serial number of
             the UPS internal microprocessor.  This number is set at
             the factory.  NOTE: This number does NOT correspond to
             the serial number on the rear of the UPS.
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: General
        -
          uuid: bbcb555846df4169bc7aead77403e8eb
          name: Uptime
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.3.0
          key: 'system.uptime[sysUpTime.0]'
          delay: 30s
          history: 2w
          trends: 0d
          units: uptime
          description: |
            MIB: SNMPv2-MIB
            The time (in hundredths of a second) since the network management
            portion of the system was last re-initialized.
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            -
              tag: Status
          triggers:
            -
              uuid: 5aa41e64e019490d9b20598325a7cc1e
              expression: '{last()}<10m'
              name: '{HOST.NAME} has been restarted (uptime < 10m)'
              priority: WARNING
              description: 'Uptime is less than 10 minutes'
              manual_close: 'YES'
              dependencies:
                -
                  name: 'No SNMP data collection'
                  expression: '{APC Smart-UPS RT 1000 XL SNMP:zabbix[host,snmp,available].max({$SNMP.TIMEOUT})}=0'
        -
          uuid: f24fc7ed9ffa4884891a01a0f1565fc4
          name: 'SNMP agent availability'
          type: INTERNAL
          key: 'zabbix[host,snmp,available]'
          history: 7d
          valuemap:
            name: zabbix.host.available
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: Status
          triggers:
            -
              uuid: 040900315fdf4fc08e44ba48ddc75b8b
              expression: '{max({$SNMP.TIMEOUT})}=0'
              name: 'No SNMP data collection'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'SNMP is not available for polling. Please check device connectivity and SNMP settings.'
      discovery_rules:
        -
          uuid: 9389b159502e4242b02a11104124bae5
          name: 'External bad battery packs discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#EXTERNAL_PACKS},1.3.6.1.4.1.318.1.1.1.2.2.6]'
          key: battery.packs.bad.discovery
          delay: 1h
          description: 'Discovery of the number of external defective battery packs.'
          item_prototypes:
            -
              uuid: 202a5c9f91c64011a915157a07245a6d
              name: '{#SNMPINDEX}: External battery packs bad'
              type: SNMP_AGENT
              snmp_oid: 1.3.6.1.4.1.318.1.1.1.2.2.6.0
              key: 'battery.external_packs_bad[upsAdvBatteryNumOfBadBattPacks.{#SNMPINDEX}]'
              delay: 15m
              history: 7d
              description: |
                MIB: PowerNet-MIB
                The number of external battery packs connected to the UPS that
                are defective. If the UPS does not use smart cells then the
                agent reports ERROR_NO_SUCH_NAME.
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: Status
        -
          uuid: ec66331f2ae64801a3ef51d6dec5a00f
          name: 'External battery packs discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#CARTRIDGE_STATUS},1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.7,{#BATTERY_PACK},1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.1,{#CARTRIDGE_INDEX},1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.2]'
          key: battery.packs.discovery
          delay: 1h
          filter:
            evaltype: AND
            conditions:
              -
                macro: '{#CARTRIDGE_STATUS}'
                value: ^$
                operator: NOT_MATCHES_REGEX
                formulaid: A
          item_prototypes:
            -
              uuid: 8d1574f1c1d442529509580309153564
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery estimated replace date'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.8.{#SNMPINDEX}'
              key: 'battery.estimated_replace_date[upsHighPrecBatteryPackCartridgeReplaceDate.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              delay: 1h
              history: 7d
              trends: '0'
              value_type: CHAR
              description: |
                MIB: PowerNet-MIB
                The battery cartridge estimated battery replace date.
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: Status
            -
              uuid: 3c829e3adec64fb39334dbacc03a3229
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery pack cartridge health'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.7.{#SNMPINDEX}'
              key: 'battery.pack.cartridge_health[upsHighPrecBatteryPackCartridgeHealth.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              history: 7d
              trends: '0'
              value_type: CHAR
              description: |
                MIB: PowerNet-MIB
                The battery cartridge health.
                  bit 0 Battery lifetime okay
                  bit 1 Battery lifetime near end, order replacement cartridge
                  bit 2 Battery lifetime exceeded, replace battery
                  bit 3 Battery lifetime near end acknowledged, order replacement cartridge
                  bit 4 Battery lifetime exceeded acknowledged, replace battery
                  bit 5 Battery measured lifetime near end, order replacement cartridge
                  bit 6 Battery measured lifetime near end acknowledged, order replacement cartridge
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: Status
              trigger_prototypes:
                -
                  uuid: 12d76cd591c84e8cbe64e39116b27a50
                  expression: '{regexp("^(0)[0|1]{15}$")}=1'
                  name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery lifetime is not okay'
                  opdata: 'Current bit set: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    The battery cartridge health.
                      bit 0 Battery lifetime okay
                      bit 1 Battery lifetime near end, order replacement cartridge
                      bit 2 Battery lifetime exceeded, replace battery
                      bit 3 Battery lifetime near end acknowledged, order replacement cartridge
                      bit 4 Battery lifetime exceeded acknowledged, replace battery
                      bit 5 Battery measured lifetime near end, order replacement cartridge
                      bit 6 Battery measured lifetime near end acknowledged, order replacement cartridge
            -
              uuid: 15f52cb076cb414fb794113e9981fdde
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.10.{#SNMPINDEX}'
              key: 'battery.pack.status[upsHighPrecBatteryPackCartridgeStatus.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              history: 7d
              trends: '0'
              value_type: CHAR
              description: |
                MIB: PowerNet-MIB
                The battery cartridge status.
                bit 0 Disconnected
                bit 1 Overvoltage
                bit 2 NeedsReplacement
                bit 3 OvertemperatureCritical
                bit 4 Charger
                bit 5 TemperatureSensor
                bit 6 BusSoftStart
                bit 7 OvertemperatureWarning
                bit 8 GeneralError
                bit 9 Communication
                bit 10 DisconnectedFrame
                bit 11 FirmwareMismatch
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: Status
              trigger_prototypes:
                -
                  uuid: d112feeac5a149d78cee45b8b9d30d6a
                  expression: '{regexp("^(0{16})$")}=0'
                  name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery status is not okay'
                  opdata: 'Current bit set: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    The battery cartridge status:
                    bit 0 Disconnected
                    bit 1 Overvoltage
                    bit 2 NeedsReplacement
                    bit 3 OvertemperatureCritical
                    bit 4 Charger
                    bit 5 TemperatureSensor
                    bit 6 BusSoftStart
                    bit 7 OvertemperatureWarning
                    bit 8 GeneralError
                    bit 9 Communication
                    bit 10 DisconnectedFrame
                    bit 11 FirmwareMismatch
            -
              uuid: e0d8f68302264c1b9420284f3e3a0272
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery temperature'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.5.{#SNMPINDEX}'
              key: 'battery.temperature[upsHighPrecBatteryPackTemperature.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              history: 7d
              value_type: FLOAT
              units: ℃
              description: |
                MIB: PowerNet-MIB
                The battery pack temperature in Celsius.
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '0.1'
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: Status
              trigger_prototypes:
                -
                  uuid: 28eaa5b47b6b4ddcb6b98b7d1f1dcc97
                  expression: '{min({$TIME.PERIOD})} > {$BATTERY.TEMP.MAX.WARN}'
                  name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery has high temperature (over {$BATTERY.TEMP.MAX.WARN}℃ for {$TIME.PERIOD})'
                  opdata: 'Current temperature: {ITEM.LASTVALUE1}'
                  priority: HIGH
            -
              uuid: bca352c952174256b9cfbcffb86fbf90
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Serial number'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.4.{#SNMPINDEX}'
              key: 'system.sn[upsHighPrecBatteryPackSerialNumber.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              delay: 15m
              history: 7d
              trends: '0'
              value_type: CHAR
              description: |
                MIB: PowerNet-MIB
                The battery pack serial number.
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: General
        -
          uuid: 19379361227740c3bf8bc9852886538d
          name: 'External sensor port 1 discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#EXTERNAL_SENSOR1_NAME},1.3.6.1.4.1.318.1.1.25.1.2.1.3]'
          key: external.sensor1.discovery
          delay: 1h
          description: uioSensorStatusTable
          item_prototypes:
            -
              uuid: d9c8acbf3a90411582404c9d5cfa9f70
              name: '{#EXTERNAL_SENSOR1_NAME}: Humidity sensor'
              type: SNMP_AGENT
              snmp_oid: 1.3.6.1.4.1.318.1.1.25.1.2.1.7.1.1
              key: 'external.sensor.humidity[uioSensorStatusHumidity.1.{#SNMPINDEX}]'
              history: 7d
              value_type: FLOAT
              units: '%'
              description: |
                MIB: PowerNet-MIB
                The sensor's current humidity reading - a relative humidity
                 percentage. -1 indicates an invalid reading due to either a
                 sensor that doesn't read humidity or lost communications.
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: Status
            -
              uuid: 1a475822bc324bbf8c4aa15c34734270
              name: '{#EXTERNAL_SENSOR1_NAME}: Sensor alarm status'
              type: SNMP_AGENT
              snmp_oid: 1.3.6.1.4.1.318.1.1.25.1.2.1.9.1.1
              key: 'external.sensor.status[uioSensorStatusAlarmStatus.1.{#SNMPINDEX}]'
              history: 7d
              description: |
                MIB: PowerNet-MIB
                The alarm status of the sensor. Possible values:
                uioNormal                 (1),
                uioWarning                (2),
                uioCritical               (3),
                sensorStatusNotApplicable (4)
              valuemap:
                name: 'PowerNet-MIB::uioSensorStatusAlarmStatus'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: Status
              trigger_prototypes:
                -
                  uuid: cf3931f71420447cb791f5c1de4f7cbd
                  expression: '{last()}=3'
                  name: '{#EXTERNAL_SENSOR1_NAME}: Sensor has status Critical'
                  priority: HIGH
                  description: 'The external sensor has returned a value greater than the critical threshold.'
                -
                  uuid: eaa3114455aa435a81d7c430825af0f2
                  expression: '{last()}=4'
                  name: '{#EXTERNAL_SENSOR1_NAME}: Sensor has status Not Applicable'
                  priority: INFO
                  description: 'The external sensor does not work or is not connected.'
                -
                  uuid: eac666e57fcb4f8bb3bf2c043e1687d9
                  expression: '{last()}=2'
                  name: '{#EXTERNAL_SENSOR1_NAME}: Sensor has status Warning'
                  priority: AVERAGE
                  description: 'The external sensor has returned a value greater than the warning threshold.'
            -
              uuid: 6d1005b2b6ad41369174d93b1ebe1959
              name: '{#EXTERNAL_SENSOR1_NAME}: Temperature sensor'
              type: SNMP_AGENT
              snmp_oid: 1.3.6.1.4.1.318.1.1.25.1.2.1.6.1.1
              key: 'external.sensor.temperature[uioSensorStatusTemperatureDegC.1.{#SNMPINDEX}]'
              history: 7d
              value_type: FLOAT
              units: ℃
              description: |
                MIB: PowerNet-MIB
                The sensor's current temperature reading in Celsius.
                 -1 indicates an invalid reading due to lost communications.
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: Status
          overrides:
            -
              name: Temp
              step: '1'
              filter:
                conditions:
                  -
                    macro: '{#EXTERNAL_SENSOR1_NAME}'
                    value: Temp
                    formulaid: A
              operations:
                -
                  operationobject: ITEM_PROTOTYPE
                  operator: LIKE
                  value: Humidity
                  status: ENABLED
                  discover: NO_DISCOVER
        -
          uuid: c4df3e0e0eba4585bdd01358f9d7f5d9
          name: 'External sensor port 2 discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#EXTERNAL_SENSOR2_NAME},1.3.6.1.4.1.318.1.1.25.1.2.2.3]'
          key: external.sensor2.discovery
          delay: 1h
          description: uioSensorStatusTable
          item_prototypes:
            -
              uuid: 7d08e2a5df41454f863f5b50a911f819
              name: '{#EXTERNAL_SENSOR2_NAME}: Humidity sensor'
              type: SNMP_AGENT
              snmp_oid: 1.3.6.1.4.1.318.1.1.25.1.2.2.7.1.1
              key: 'external.sensor.humidity[uioSensorStatusHumidity.2.{#SNMPINDEX}]'
              history: 7d
              value_type: FLOAT
              units: '%'
              description: |
                MIB: PowerNet-MIB
                The sensor's current humidity reading - a relative humidity
                 percentage. -1 indicates an invalid reading due to either a
                 sensor that doesn't read humidity or lost communications.
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: Status
            -
              uuid: 4774fd152aab49de9064490cf7ec1d0a
              name: '{#EXTERNAL_SENSOR2_NAME}: Sensor alarm status'
              type: SNMP_AGENT
              snmp_oid: 1.3.6.1.4.1.318.1.1.25.1.2.2.9.1.1
              key: 'external.sensor.status[uioSensorStatusAlarmStatus.2.{#SNMPINDEX}]'
              history: 7d
              description: |
                MIB: PowerNet-MIB
                The alarm status of the sensor. Possible values:
                uioNormal                 (1),
                uioWarning                (2),
                uioCritical               (3),
                sensorStatusNotApplicable (4)
              valuemap:
                name: 'PowerNet-MIB::uioSensorStatusAlarmStatus'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: Status
              trigger_prototypes:
                -
                  uuid: 12bfc00135e34e93857eff517946ac95
                  expression: '{last()}=3'
                  name: '{#EXTERNAL_SENSOR2_NAME}: Sensor has status Critical'
                  priority: HIGH
                  description: 'The external sensor has returned a value greater than the critical threshold.'
                -
                  uuid: 92d16e8d456540969953cc881bbfa82a
                  expression: '{last()}=4'
                  name: '{#EXTERNAL_SENSOR2_NAME}: Sensor has status Not Applicable'
                  priority: INFO
                  description: 'The external sensor does not work or is not connected.'
                -
                  uuid: 7bc5c68f1ff54cb5942cf33a391aa23b
                  expression: '{last()}=2'
                  name: '{#EXTERNAL_SENSOR2_NAME}: Sensor has status Warning'
                  priority: AVERAGE
                  description: 'The external sensor has returned a value greater than the warning threshold.'
            -
              uuid: d94425f2025045459af40e8fcb72734e
              name: '{#EXTERNAL_SENSOR2_NAME}: Temperature sensor'
              type: SNMP_AGENT
              snmp_oid: 1.3.6.1.4.1.318.1.1.25.1.2.2.6.1.1
              key: 'external.sensor.temperature[uioSensorStatusTemperatureDegC.2.{#SNMPINDEX}]'
              history: 7d
              value_type: FLOAT
              units: ℃
              description: |
                MIB: PowerNet-MIB
                The sensor's current temperature reading in Celsius.
                 -1 indicates an invalid reading due to lost communications.
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: Status
          overrides:
            -
              name: Temp
              step: '1'
              filter:
                conditions:
                  -
                    macro: '{#EXTERNAL_SENSOR2_NAME}'
                    value: Temp
                    formulaid: A
              operations:
                -
                  operationobject: ITEM_PROTOTYPE
                  operator: LIKE
                  value: Humidity
                  status: ENABLED
                  discover: NO_DISCOVER
        -
          uuid: 68610f5b6df44229bcb0ad4b0fa1c3f8
          name: 'Input phases discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#PHASEINDEX},1.3.6.1.4.1.318.1.1.1.9.2.3.1.2.1.1]'
          key: input.phases.discovery
          delay: 1h
          description: 'The input phase identifier. OID upsPhaseInputPhaseIndex.1.1'
          item_prototypes:
            -
              uuid: d17e9bb868b143dca508c4f79092cd6e
              name: '{#PHASEINDEX}: Phase input current'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.318.1.1.1.9.2.3.1.6.1.1.{#PHASEINDEX}'
              key: 'phase.input.current[upsPhaseInputCurrent.1.1.{#PHASEINDEX}]'
              history: 7d
              value_type: FLOAT
              units: A
              description: |
                MIB: PowerNet-MIB
                The input current in 0.1 amperes, or -0.1 if it's
                 unsupported by this UPS.
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '0.1'
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: Status
            -
              uuid: cf03abf328754a4082017f480051292f
              name: '{#PHASEINDEX}: Phase input voltage'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.318.1.1.1.9.2.3.1.3.1.1.{#PHASEINDEX}'
              key: 'phase.input.voltage[upsPhaseInputVoltage.1.1.{#PHASEINDEX}]'
              history: 7d
              value_type: FLOAT
              units: V
              description: |
                MIB: PowerNet-MIB
                The input voltage in VAC, or -1 if it's unsupported
                 by this UPS.
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: Status
              trigger_prototypes:
                -
                  uuid: 309d43050f574a8aa0e0bc1f0c962eda
                  expression: '{min({$TIME.PERIOD})} > {$UPS.INPUT_VOLT.MAX.WARN} or {max({$TIME.PERIOD})} < {$UPS.INPUT_VOLT.MIN.WARN}'
                  name: '{#PHASEINDEX}: Unacceptable phase {#PHASEINDEX} input voltage (out of range {$UPS.INPUT_VOLT.MIN.WARN}-{$UPS.INPUT_VOLT.MAX.WARN}V for {$TIME.PERIOD})'
                  opdata: 'Current phase {#PHASEINDEX} voltage: {ITEM.LASTVALUE1}'
                  priority: HIGH
        -
          uuid: a7b39188df294ec182c3e1f2a2417154
          name: 'Output phases discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#PHASEINDEX},1.3.6.1.4.1.318.1.1.1.9.3.3.1.2.1.1]'
          key: output.phases.discovery
          delay: 1h
          description: 'The output phase identifier. OID upsPhaseOutputPhaseIndex.1.1'
          item_prototypes:
            -
              uuid: 638c63c2f4ad4cad8ed71a796d78705b
              name: '{#PHASEINDEX}: Phase output current'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.318.1.1.1.9.3.3.1.4.1.1.{#PHASEINDEX}'
              key: 'phase.output.current[upsPhaseOutputCurrent.1.1.{#PHASEINDEX}]'
              history: 7d
              value_type: FLOAT
              units: A
              description: |
                MIB: PowerNet-MIB
                The output current in 0.1 amperes drawn
                 by the load on the UPS, or -1 if it's unsupported
                 by this UPS.
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '0.1'
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: Status
            -
              uuid: ba4a2ae8abea4e2692b9a43231783648
              name: '{#PHASEINDEX}: Phase output load, %'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.318.1.1.1.9.3.3.1.10.1.1.{#PHASEINDEX}'
              key: 'phase.output.load.percent[upsPhaseOutputPercentLoad.1.1.{#PHASEINDEX}]'
              history: 7d
              value_type: FLOAT
              units: '%'
              description: |
                MIB: PowerNet-MIB
                The percentage of the UPS load capacity in VA at
                 redundancy @ (n + x) presently being used on this
                 output phase, or -1 if it's unsupported by this UPS.
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: Status
            -
              uuid: 4e22c7f6d7e14b20b3720e082042fd4f
              name: '{#PHASEINDEX}: Phase output voltage'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.318.1.1.1.9.3.3.1.3.1.1.{#PHASEINDEX}'
              key: 'phase.output.voltage[upsPhaseOutputVoltage.1.1.{#PHASEINDEX}]'
              history: 7d
              value_type: FLOAT
              units: V
              description: |
                MIB: PowerNet-MIB
                The output voltage in VAC, or -1 if it's unsupported
                 by this UPS.
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: Status
              trigger_prototypes:
                -
                  uuid: 99b3166f9cb64e5381d3fde4f8afb741
                  expression: '{min({$TIME.PERIOD})} > {$UPS.INPUT_VOLT.MAX.WARN} or {max({$TIME.PERIOD})} < {$UPS.INPUT_VOLT.MIN.WARN}'
                  name: '{#PHASEINDEX}: Unacceptable phase {#PHASEINDEX} output voltage (out of range {$UPS.INPUT_VOLT.MIN.WARN}-{$UPS.INPUT_VOLT.MAX.WARN}V for {$TIME.PERIOD})'
                  opdata: 'Current phase {#PHASEINDEX} voltage: {ITEM.LASTVALUE1}'
                  priority: HIGH
      macros:
        -
          macro: '{$BATTERY.CAPACITY.MIN.WARN}'
          value: '50'
          description: 'Minimum battery capacity percentage for trigger expression.'
        -
          macro: '{$BATTERY.TEMP.MAX.WARN}'
          value: '55'
          description: 'Maximum battery temperature for trigger expression.'
        -
          macro: '{$SNMP.TIMEOUT}'
          value: 5m
          description: 'The time interval for SNMP agent availability trigger expression.'
        -
          macro: '{$TIME.PERIOD}'
          value: 15m
          description: 'Time period for trigger expression.'
        -
          macro: '{$UPS.INPUT_FREQ.MAX.WARN}'
          value: '50.3'
          description: 'Maximum input frequency for trigger expression.'
        -
          macro: '{$UPS.INPUT_FREQ.MIN.WARN}'
          value: '49.7'
          description: 'Minimum input frequency for trigger expression.'
        -
          macro: '{$UPS.INPUT_VOLT.MAX.WARN}'
          value: '243'
          description: 'Maximum input voltage for trigger expression.'
        -
          macro: '{$UPS.INPUT_VOLT.MIN.WARN}'
          value: '197'
          description: 'Minimum input voltage for trigger expression.'
        -
          macro: '{$UPS.OUTPUT.MAX.WARN}'
          value: '80'
          description: 'Maximum output load in % for trigger expression.'
      valuemaps:
        -
          uuid: b2af1e2dcb874d43949c383f9b347f36
          name: 'PowerNet-MIB::uioSensorStatusAlarmStatus'
          mappings:
            -
              value: '1'
              newvalue: Normal
            -
              value: '2'
              newvalue: Warning
            -
              value: '3'
              newvalue: Critical
            -
              value: '4'
              newvalue: 'Not applicable'
        -
          uuid: b06b54b07e6840e5a0c52ba7a6acf86a
          name: 'PowerNet-MIB::upsAdvBatteryReplaceIndicator'
          mappings:
            -
              value: '1'
              newvalue: 'no Battery Needs Replacing'
            -
              value: '2'
              newvalue: 'battery Needs Replacing'
        -
          uuid: a62f96735c47467da94b6bcf98cc013d
          name: 'PowerNet-MIB::upsAdvInputLineFailCause'
          mappings:
            -
              value: '1'
              newvalue: 'no Transfer'
            -
              value: '2'
              newvalue: 'High Line Voltage'
            -
              value: '3'
              newvalue: Brownout
            -
              value: '4'
              newvalue: Blackout
            -
              value: '5'
              newvalue: 'Small Momentary Sag'
            -
              value: '6'
              newvalue: 'Deep Momentary Sag'
            -
              value: '7'
              newvalue: 'Small Momentary Spike'
            -
              value: '8'
              newvalue: 'Large Momentary Spike'
            -
              value: '9'
              newvalue: 'Self Test'
            -
              value: '10'
              newvalue: 'Rate of Voltage Change'
        -
          uuid: ed12e8780c384caba8035fbb1c78e115
          name: 'PowerNet-MIB::upsBasicBatteryStatus'
          mappings:
            -
              value: '1'
              newvalue: Unknown
            -
              value: '2'
              newvalue: Normal
            -
              value: '3'
              newvalue: Low
            -
              value: '4'
              newvalue: 'In Fault Condition'
        -
          uuid: ae2ed0c2c99a4ad496f7a35226e3d4f0
          name: 'PowerNet-MIB::upsBasicOutputStatus'
          mappings:
            -
              value: '1'
              newvalue: Unknown
            -
              value: '2'
              newvalue: Online
            -
              value: '3'
              newvalue: 'On Battery'
            -
              value: '4'
              newvalue: 'On Smart Boost'
            -
              value: '5'
              newvalue: 'Timed Sleeping'
            -
              value: '6'
              newvalue: 'Software Bypass'
            -
              value: '7'
              newvalue: 'Off'
            -
              value: '8'
              newvalue: Rebooting
            -
              value: '9'
              newvalue: 'Switched Bypass'
            -
              value: '10'
              newvalue: 'Hardware Failure Bypass'
            -
              value: '11'
              newvalue: 'Sleeping Until Power Return'
            -
              value: '12'
              newvalue: 'On Smart Trim'
            -
              value: '13'
              newvalue: 'Eco Mode'
            -
              value: '14'
              newvalue: 'Hot Standby'
            -
              value: '15'
              newvalue: 'On Battery Test'
            -
              value: '16'
              newvalue: 'Emergency Static Bypass'
            -
              value: '17'
              newvalue: 'Static Bypass Standby'
            -
              value: '18'
              newvalue: 'Power Saving Mode'
            -
              value: '19'
              newvalue: 'Spot Mode'
            -
              value: '20'
              newvalue: E-Conversion
            -
              value: '21'
              newvalue: 'Charger Spotmode'
            -
              value: '22'
              newvalue: 'Inverter Spotmode'
            -
              value: '23'
              newvalue: 'Active Load'
            -
              value: '24'
              newvalue: 'Battery Discharge Spotmode'
            -
              value: '25'
              newvalue: 'Inverter Standby'
            -
              value: '26'
              newvalue: 'Charger Only'
        -
          uuid: 8cddc4f99ecb4866b1638b82b145ea8b
          name: zabbix.host.available
          mappings:
            -
              value: '0'
              newvalue: 'not available'
            -
              value: '1'
              newvalue: available
            -
              value: '2'
              newvalue: unknown
  graphs:
    -
      uuid: a0d8e0338b8d4fd2bd6fdf537373d63c
      name: 'Capacity of the UPS batteries'
      type: PIE
      graph_items:
        -
          color: 1A7C11
          item:
            host: 'APC Smart-UPS RT 1000 XL SNMP'
            key: 'battery.capacity[upsHighPrecBatteryCapacity]'
    -
      uuid: 0817d2550d9642fe95ce182dce5cefd8
      name: Output
      graph_items:
        -
          color: 1A7C11
          item:
            host: 'APC Smart-UPS RT 1000 XL SNMP'
            key: 'output.current[upsHighPrecOutputCurrent]'
        -
          sortorder: '1'
          color: 2774A4
          item:
            host: 'APC Smart-UPS RT 1000 XL SNMP'
            key: 'output.load[upsHighPrecOutputLoad]'
    -
      uuid: ce2f4070e7a14d8283d0a8aff0fcd5e6
      name: Voltage
      graph_items:
        -
          color: 1A7C11
          item:
            host: 'APC Smart-UPS RT 1000 XL SNMP'
            key: 'input.voltage[upsHighPrecInputLineVoltage]'
        -
          sortorder: '1'
          color: 2774A4
          item:
            host: 'APC Smart-UPS RT 1000 XL SNMP'
            key: 'output.voltage[upsHighPrecOutputVoltage]'
